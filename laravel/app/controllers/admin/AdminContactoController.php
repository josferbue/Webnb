<?phpuse Illuminate\Filesystem\Filesystem;class AdminContactoController extends AdminController{    public function __construct()    {        parent::__construct();    }    public function enviar(){        // tu clave secreta        $secret = "6LfP6SUTAAAAACLEx31UvN9uYPjtEOo7lUJYeyer";        // respuesta vacía        $response = null;        // comprueba la clave secreta        $reCaptcha = new ReCaptcha($secret);        // si se detecta la respuesta como enviada        if ($_POST["g-recaptcha-response"]) {            $response = $reCaptcha->verifyResponse(                $_SERVER["REMOTE_ADDR"],                $_POST["g-recaptcha-response"]            );        }        if (!($response != null && $response->success)){            return Redirect::to('Contacto');        }            $rules  =   array(                'contact-name' => 'required',                'contact-email' => 'required|email',                'contact-message' => 'required'            );        $validator = Validator::make(            Input::all(),            $rules,            array(                'required'  =>  'Debe rellenar este campo.',                'email'     =>  'El formato es inválido.',            )        );        if($validator->fails()){            return Redirect::to('Contacto')->withErrors($validator);        }        Mail::send('emails.contacto', array('data' => Input::all()), function($message)        {            $message->to('cristina@synergia.es')->subject('Synergia-Resort. Mensaje de '.Input::get('contact-name').'.');        });        return Redirect::to('Contacto')->with('success', '<b> Muchas gracias por contactar con nosotros, nos pondremos en contacto con la mayor brevedad.</b>');    }    /*public function sendMail(){        $mensaje = null;        $rules = array            (                'name' => 'required|min:3|max:80',                'email' => 'required|email|between:3,80',                'grupo' => 'exists:tutorias,id',                'telefono' => 'required|numeric',                'g-recaptcha-response' => 'required|recaptcha',            );            $messages = array            (                'name.required' => 'El campo es requerido',                'name.min' => 'Mínimo de 3 caracteres',                'name.max' => 'Máximo de 80 caracteres',                'email.required' => 'El campo es requerido',                'email.email' => 'El formato de email es incorrecto',                'email.between' => 'Entre 30 y 80 caracteres',                'msg.required' => 'El campo es requerido',                'msg.between' => 'Entre 3 y 500 caracteres',                'g-recaptcha-response.required' => 'El campo captcha es requerido',                'g-recaptcha-response.recaptcha' => 'Captcha incorrecto',            );            $validator = Validator::make(Input::All(), $rules, $messages);            if ($validator->passes())            {                $data = array                (                    'nombre'	=>	Input::get('name'),                    'email'		=>	Input::get('email'),                    'telefono'	=>	Input::get('telefono'),                    'mensaje'	=>	Input::get('msg')                );                $fromEmail	=	Tutoria::find(Input::get('grupo'))->email;                $fromName	=	'IES Hnos Machado';                Mail::send('emails.contacto', $data, function($message) use ($fromName, $fromEmail)                {                    $message->to($fromEmail, $fromName);                    $message->from($fromEmail, $fromName)->subject('Nueva solicitud de tutoría');                });                $mensaje = 'Correo enviado correctamente. Nos pondremos en contacto con usted a la mayor brevedad posible. <b>El Equipo Directivo del IES Hnos. Machado.</b>';                $fecha_solicitud = date("Y-m-d H:i:s");                $historicoTutoria = new Historico_tutoria();                $historicoTutoria->fecha_solicitud = $fecha_solicitud;                $historicoTutoria->nombre = Input::get('name');                $historicoTutoria->telefono = Input::get('telefono');                $historicoTutoria->email_emisor = Input::get('email');                $historicoTutoria->email_receptor = $fromEmail;                $historicoTutoria->clase = Tutoria::find(Input::get('grupo'))->clase;                $historicoTutoria->mensaje = Input::get('msg');                $historicoTutoria->save();            }            else            {                if (Request::ajax())                {                    return Response::json                    ([                        'success' => false,                        'errors'  => $validator->getMessageBag()->toArray()                    ]);                }                else                {                    return Redirect::back()->withInput()->withErrors($validator);                }            }        return View::make('site/tutorias', array('success' => $mensaje));    }*/}