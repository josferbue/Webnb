<?php/*|--------------------------------------------------------------------------| Application Routes|--------------------------------------------------------------------------|| Here is where you can register all of the routes for an application.| It's a breeze. Simply tell Laravel the URIs it should respond to| and give it the Closure to execute when that URI is requested.|*//** ------------------------------------------ *  Route model binding *  ------------------------------------------ */Route::model('user', 'User');Route::model('entrada', 'Entrada');Route::model('enlace', 'Enlace');Route::model('role', 'Role');Route::model('evento', 'Evento');Route::model('reservas', 'Reserva');Route::model('comentarios', 'Comentario');Route::model('tarifas', 'Configuracion');Route::model('ubicacion', 'Ubicacion');Route::model('anfitrion', 'Anfitrion');Route::model('galeria', 'Galeria');/** ------------------------------------------ *  Route constraint patterns *  ------------------------------------------ */Route::pattern('entrada', '[0-9]+');Route::pattern('enlace', '[0-9]+');Route::pattern('evento', '[0-9]+');Route::pattern('user', '[0-9]+');Route::pattern('role', '[0-9]+');Route::pattern('token', '[0-9a-z]+');Route::pattern('reserva', '[0-9]+');Route::pattern('comentario', '[0-9]+');Route::pattern('tarifas', '[0-9]+');Route::pattern('ubicacion', '[0-9]+');Route::pattern('anfitrion', '[0-9]+');Route::pattern('galeria', '[0-9]+');/** ------------------------------------------ *  Admin Routes *  ------------------------------------------ */Route::group(array('prefix' => 'adminlte'), function(){    //Rutas Tarifas    Route::get('tarifas/data', 'AdminTarifasLTEController@getData');    Route::get('tarifas/{tarifas}/delete', 'AdminTarifasLTEController@getDelete');    Route::resource('tarifas', 'AdminTarifasLTEController');    //Fin Rutas Tarifas    //Rutas Reservas    Route::get('reservas/{reservas}/delete', 'AdminReservasLTEController@getDelete');    Route::get('reservas/data', 'AdminReservasLTEController@getData');    Route::get('reservas/{id}/pago', 'AdminReservasLTEController@getPago');    Route::post('reservas/{reserva}/pago', 'AdminReservasLTEController@postPago');    Route::resource('reservas', 'AdminReservasLTEController');    //Fin Rutas Reservas    //Rutas Ubicacion    Route::resource('ubicacion', 'AdminUbicacionLTEController');    //Fin Rutas Ubicacion    //Rutas Anfitrion    Route::post('anfitrion/sustituir-imagen', 'AdminAnfitrionLTEController@sustituirImagen');    Route::get('anfitrion/eliminar-imagen', 'AdminAnfitrionLTEController@eliminarImagen');    Route::resource('anfitrion', 'AdminAnfitrionLTEController');    //Fin Rutas Anfitrion    //Rutas Galeria    Route::post('galeria/upload', 'AdminGaleriaLTEController@upload');    Route::post('galeria/delete-image', 'AdminGaleriaLTEController@delete_image');    Route::resource('galeria', 'AdminGaleriaLTEController');    //Fin Rutas Galeria    //Rutas Comentarios    Route::get('comentarios/publicar', 'AdminComentariosLTEController@publicar');    Route::get('comentarios/data', 'AdminComentariosLTEController@getData');    Route::get('comentarios/{comentarios}/delete', 'AdminComentariosLTEController@getDelete');    Route::resource('comentarios', 'AdminComentariosLTEController');    //Fin Rutas Comentarios    //Rutas Blog    /*     * ¡¡¡SI HACES SEED HABRÁ QUE ACTUALIZAR LOS PARÁMETROS DE FECHA DE LAS URL DE EJEMPLOS PARA QUE TE ENCUENTRE ENTRADAS!!!     * Testeo rutas amigables para blog.     * */    /*     * LISTA UNA SOLA ENTRADA.     * Ejemplo: http://localhost/adminlte/blog/2016/08/16/noticias/Lorem-ipsum-dolor-sit-amet     * */    Route::get('blog/{anyo}/{mes}/{dia}/{categoria}/{titulo}', 'AdminEntradasLTEController@getEntradaConcreta')        ->where(array('anyo' => '[0-9]{4}', 'mes' => '[0-9]{2}', 'dia' => '[0-9]{2}', 'categoria' => '[a-zA-Z]+', 'titulo' => '[\-a-zA-Z]+'));    /*     * LISTA VARIAS ENTRADAS DE UNA CATEGORÍA PARA UN DÍA CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016/08/16/noticias     * */    Route::get('blog/{anyo}/{mes}/{dia}/{categoria}', 'AdminEntradasLTEController@getEntradasPorDiaCategoria')        ->where(array('anyo' => '[0-9]{4}', 'mes' => '[0-9]{2}', 'dia' => '[0-9]{2}', 'categoria' => '[a-zA-Z]+'));    /*     * LISTA VARIAS ENTRADAS PARA UN DÍA CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016/08/16     * */    Route::get('blog/{anyo}/{mes}/{dia}', 'AdminEntradasLTEController@getEntradasPorDia')        ->where(array('anyo' => '[0-9]{4}', 'mes' => '[0-9]{2}', 'dia' => '[0-9]{2}'));    /*     * LISTA VARIAS ENTRADAS DE UNA CATEGORIA PARA UN MES CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016/08/noticias     * */    Route::get('blog/{anyo}/{mes}/{categoria}', 'AdminEntradasLTEController@getEntradasPorMesCategoria')        ->where(array('anyo' => '[0-9]{4}', 'mes' => '[0-9]{2}', 'categoria' => '[a-zA-Z]+'));    /*     * LISTA VARIAS ENTRADAS PARA UN MES CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016/08     * */    Route::get('blog/{anyo}/{mes}', 'AdminEntradasLTEController@getEntradasPorMes')        ->where(array('anyo' => '[0-9]{4}', 'mes' => '[0-9]{2}'));    /*     * LISTA VARIAS ENTRADAS DE UNA CATEGORIA PARA UN AÑO CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016/noticias     * */    Route::get('blog/{anyo}/{categoria}', 'AdminEntradasLTEController@getEntradasPorAnyoCategoria')        ->where(array('anyo' => '[0-9]{4}', 'categoria' => '[a-zA-Z]+'));    /*     * LISTA VARIAS ENTRADAS PARA UN AÑO CONCRETO.     * Ejemplo: http://localhost/adminlte/blog/2016     * */    Route::get('blog/{anyo}', 'AdminEntradasLTEController@getEntradasPorAnyo')        ->where(array('anyo' => '[0-9]{4}'));    Route::get('blog/{entrada}/show', 'AdminEntradasLTEController@getShow');    Route::get('blog/{entrada}/addLink', 'AdminEntradasLTEController@getAddLink');    Route::get('blog/{entrada}/edit', 'AdminEntradasLTEController@getEdit');    Route::post('blog/{entrada}/edit', 'AdminEntradasLTEController@postEdit');    Route::get('blog/{entrada}/delete', 'AdminEntradasLTEController@getDelete');    Route::post('blog/{entrada}/delete', 'AdminEntradasLTEController@postDelete');    Route::get('blog/{entrada}/share', 'AdminEntradasLTEController@getShare');    Route::post('blog/{entrada}/upload', 'AdminEntradasLTEController@postUpload');    Route::post('blog/delete-image', 'AdminEntradasLTEController@delete_image');    Route::controller('blog', 'AdminEntradasLTEController');    //Fin Rutas Blog    //Rutas para Enlaces    Route::get('enlace/{entrada}','AdminEntradasLTEController@getEnlacesIndex');    Route::get('enlace/{enlace}/edit', 'AdminEntradasLTEController@getEditEnlace');    Route::post('enlace/{enlace}/edit', 'AdminEntradasLTEController@postEditEnlace');    Route::get('enlace/{enlace}/delete', 'AdminEntradasLTEController@getDeleteEnlace');    Route::post('enlace/{enlace}/delete', 'AdminEntradasLTEController@postDeleteEnlace');    Route::post('enlace/create','AdminEntradasLTEController@postCreateEnlace');    Route::get('enlace/{entrada}/data','AdminEntradasLTEController@getDataEnlace');    //Fin Rutas Enlaces    //Rutas Eventos    Route::get('eventos/url', 'AdminEventosLTEController@getUrl');    Route::get('eventos/{evento}/edit', 'AdminEventosLTEController@getEdit');    Route::post('eventos/{evento}/edit', 'AdminEventosLTEController@postEdit');    Route::post('eventos/delete', 'AdminEventosLTEController@postDelete');    Route::post('eventos/save', 'AdminEventosLTEController@postSave');    Route::post('eventos/update', 'AdminEventosLTEController@postUpdate');    Route::controller('eventos', 'AdminEventosLTEController');    //Rutas Eventos Disponibles    Route::controller('eventos-disponibles', 'AdminEventosDisponiblesLTEController');    //Fin Rutas Eventos Disponibles    //Fin Rutas Eventos    //Rutas Descripcion    Route::resource('descripcion', 'AdminDescripcionLTEController');    //Fin Rutas Descripción    //Rutas Condiciones De Uso    Route::resource('condiciones-de-uso', 'AdminCondicionesDeUsoLTEController');    //Fin Rutas Condiciones De Uso    //Rutas Usuarios    Route::get('users/{user}/show', 'AdminUsersLTEController@getShow');    Route::get('users/{user}/edit', 'AdminUsersLTEController@getEdit');    Route::post('users/{user}/edit', 'AdminUsersLTEController@postEdit');    Route::get('users/{user}/delete', 'AdminUsersLTEController@getDelete');    Route::post('users/{user}/delete', 'AdminUsersLTEController@postDelete');    Route::controller('users', 'AdminUsersLTEController');    //Fin Rutas Usuarios    Route::controller('/', 'AdminDashboardLTEController');});/** ------------------------------------------ *  Frontend Routes *  ------------------------------------------ *///Reserva RoutesRoute::post("Reservar/Fechas",'ReservaController@postCreateWithInput');Route::get("Reservar/Pago/{uniq}",'ReservaController@getRealizarPago');Route::get("Reservar/Finalizar",'ReservaController@finalizar');Route::get("Reservar/Finalizar",'ReservaController@finalizar');Route::get("Reservar/Cancelar",'ReservaController@cancelar');Route::get("Reservar/Unavailables",'ReservaController@getUnavailables');Route::get("Reservar/Precio/{fecha_ini}/{fecha_fin}",'ReservaController@getPrecio');Route::resource('Reservar', 'ReservaController');//Comentario RoutesRoute::post('comentarios/enviar', 'ComentarioController@enviar');// User reset routesRoute::get('user/reset/{token}', 'UserController@getReset');// User password resetRoute::post('user/reset/{token}', 'UserController@postReset');//:: User Account Routes ::Route::post('user/{user}/edit', 'UserController@postEdit');//:: User Account Routes ::Route::post('user/login', 'UserController@postLogin');# User RESTful Routes (Login, Logout, Register, etc)Route::controller('user', 'UserController');//:: Application Routes ::Route::get('entradas/{entrada}/details', 'AdminEntradasController@getDetails');Route::get('galerias/{entrada}/details', 'AdminEntradasController@getDetailsGaleria');# Filter for detect languageRoute::when('contact-us','detectLang');Route::get('eventos/{date}/details', 'AdminEventosController@getDetails');Route::get('Inicio', function(){	$eventos = Evento::all();	$calendarEvent = array();	foreach ($eventos as $evento){		$fecha = new DateTime($evento->fecha_inicio);		$fechaFin = new DateTime($evento->fecha_fin);		do {			$calendarEvent[$fecha->format('Y-m-d')] = array(								"url" => URL::to('eventos/' . $fecha->format('Y-m-d') . '/details'),			);			$fecha->add(new DateInterval('P1D'));		}while($fecha <= $fechaFin);	}	JavaScript::put([		'calendariodeeventos' => $calendarEvent,	]);	$entradas = Entrada::all();	return View::make('site/welcome',compact('entradas'));		});Route::post('enviar', 'AdminContactoController@enviar');//Views of siteRoute::get('Aviso-legal', function(){return View::make('site/aviso-legal');});Route::get('Equipamiento', function(){return View::make('site/equipamiento');});Route::get('Ubicacion', function(){return View::make('site/ubicacion');});Route::get('Galeria', function(){return View::make('site/galeria');});Route::get('Contacto', function(){return View::make('site/contacto');});//Route::get('Blog', function(){return View::make('site/blog');});Route::get('Libro-visitas', function(){ return View::make('site/libro_visitas');});Route::get('Comentar', function(){ return View::make('site/formulario_comentarios');});Route::get('Condiciones-uso', function(){ return View::make('site/condiciones_uso');});App::missing(function($exception){	return Redirect::action('WelcomeController@getIndex');});# Index Page - Last route, no matchesRoute::get('/', array('after' => 'detectLang','uses' => 'WelcomeController@getIndex'));