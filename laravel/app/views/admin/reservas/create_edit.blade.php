@extends('admin.layouts.modal'){{-- content --}}@section('content')	<!-- Tabs -->		<ul class="nav nav-tabs">			<li class="active"><a href="#tab-general" data-toggle="tab">General</a></li>		</ul>	<!-- ./ tabs -->    @if(isset($reserva))        {{--*/                        $reserva->fecha_ini =   date('d-m-Y', strtotime($reserva->fecha_ini));                        $reserva->fecha_fin =   date('d-m-Y', strtotime($reserva->fecha_fin));                       /*--}}        {{ Form::model($reserva, array('action' => array('AdminReservasController@update', $reserva->id), 'method' => 'put', 'class' => 'form-horizontal')) }}    @else        {{ Form::open(array('action' => 'AdminReservasController@store', 'method' => 'post', 'class' => 'form-horizontal')) }}    @endif    <div class="tab-content">        <!-- General tab -->        <div class="tab-pane active" id="tab-general">            <!-- reserva fecha inicio -->            <div class="form-group {{{ $errors->has('fecha_ini') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('fecha_ini', 'Fecha Inicio', array('class' => 'control-label')) }}                    @if(isset($unavailable_on))                     {{ Form::text('fecha_ini', null, array('class' => 'form-control')) }}                    @else                     {{ Form::text('fecha_ini', null, array('class' => 'form-control', 'disabled' => 'disabled')) }}                    @endif                    {{ $errors->first('fecha_ini', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ reserva fecha inicio -->            <!-- reserva fecha final -->            <div class="form-group {{{ $errors->has('fecha_fin') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('fecha_fin', 'Fecha Final', array('class' => 'control-label')) }}                    @if(isset($unavailable_on))                    {{ Form::text('fecha_fin', null, array('class' => 'form-control')) }}                    @else                        {{ Form::text('fecha_fin', null, array('class' => 'form-control', 'disabled' => 'disabled')) }}                    @endif                    {{ $errors->first('fecha_fin', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ reserva fecha final -->            <!-- ./ reserva hora llegada -->            <div class="form-group {{{ $errors->has('hora_llegada') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('hora_llegada', 'Hora de Llegada', array('class' => 'control-label')) }}                    {{ Form::select('hora_llegada', $horas, null, array('class' => 'form-control')) }}                    {{ $errors->first('hora_llegada', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- reserva hora llegada -->            <!-- reserva nombre -->            <div class="form-group {{{ $errors->has('nombre') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('nombre', 'Nombre', array('class' => 'control-label')) }}                    {{ Form::text('nombre', null, array('class' => 'form-control')) }}                    {{ $errors->first('nombre', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ reserva nombre -->            <!-- reserva email -->            <div class="form-group {{{ $errors->has('email') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('email', 'Email', array('class' => 'control-label')) }}                    {{ Form::text('email', null, array('class' => 'form-control')) }}                    {{ $errors->first('email', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ reserva email -->            <!-- reserva telefono -->            <div class="form-group {{{ $errors->has('telefono') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('telefono', 'Teléfono', array('class' => 'control-label')) }}                    {{ Form::text('telefono', null, array('class' => 'form-control')) }}                    {{ $errors->first('telefono', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- reserva dni -->            <div class="form-group {{{ $errors->has('dni') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('dni', 'DNI o Pasaporte', array('class' => 'control-label')) }}                    {{ Form::text('dni', null, array('class' => 'form-control')) }}                    {{ $errors->first('dni', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ reserva dni -->            <div class="form-group {{{ $errors->has('fecha_nacimiento') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('fecha_nacimiento', 'Fecha de nacimiento', array('class' => 'control-label')) }}                    {{ Form::text('fecha_nacimiento', null, array('class' => 'form-control')) }}                    {{ $errors->first('fecha_nacimiento', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('pais_nacionalidad') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('pais_nacionalidad', 'País', array('class' => 'control-label')) }}                    {{ Form::text('pais_nacionalidad', null, array('class' => 'form-control')) }}                    {{ $errors->first('pais_nacionalidad', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('fecha_expedicion') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('fecha_expedicion', 'Fecha de expedición', array('class' => 'control-label')) }}                    {{ Form::text('fecha_expedicion', null, array('class' => 'form-control')) }}                    {{ $errors->first('fecha_expedicion', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('adultos') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('adultos', 'Adultos', array('class' => 'control-label')) }}                    {{ Form::select('adultos',                        array(  '1' =>      '1',                                '2' =>      '2',                                '3'  =>     '3',                                '4'  =>     '4',                                '5'  =>     '5',                                '6'  =>     '6',                                '7'  =>     '7',                                '8'  =>     '8'                        ), null, array('class' => 'form-control'));                    }}                    {{ $errors->first('adultos', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('ninos') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('ninos', 'Niños', array('class' => 'control-label')) }}                    {{ Form::select('ninos',                        array(  '0' =>      '0',                                '1' =>      '1',                                '2'  =>     '2',                                '3'  =>     '3',                                '4'  =>     '4'                        ), null, array('class' => 'form-control'));                    }}                    {{ $errors->first('ninos', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('precio') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('precio', 'Precio', array('class' => 'control-label')) }}                    {{ Form::text('precio', null, array('class' => 'form-control')) }}                    {{ $errors->first('precio', '<span class="help-block">:message</span>') }}                </div>            </div>            <div class="form-group {{{ $errors->has('observaciones') ? 'has-error' : '' }}}">                <div class="col-md-12">                    {{ Form::label('observaciones', 'Observaciones', array('class' => 'control-label')) }}                    {{ Form::text('observaciones', null, array('class' => 'form-control')) }}                    {{ $errors->first('observaciones', '<span class="help-block">:message</span>') }}                </div>            </div>            <!-- ./ groups -->        </div>        <!-- ./ general tab -->    </div>    <!-- ./ tabs contenido -->    <!-- Form Actions -->    <div class="form-group">        <div class="col-md-12">            <button type="reset" class="btn btn-default">Limpiar</button>            <button type="submit" class="btn btn-success">{{ $text_button_submit }}</button>        </div>    </div>    {{ Form::close() }}@stop@section('styles')<!-- 1 --><link href="{{asset('assets/css/dropzone.css')}}" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">@stop{{-- Scripts --}}@section('scripts')	<script type="text/javascript" src="{{ asset('/template/plugins/ckeditor/ckeditor.js') }}"></script>    <script type="text/javascript" src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>    <script type="text/javascript">        var hoy = new Date();        /*function datePickerFechaInicio(){            $('#fecha_ini').datepicker({                numberOfMonths: 1,                regional: 'es',                dateFormat: 'dd-mm-yy',                changeMonth: true,                changeYear: true,                yearRange: hoy.getFullYear()+':2100',                monthNamesShort: ["Ene", "Feb", "Mar", "Abr",                    "May", "Jun", "Jul", "Ago", "Sep",                    "Oct", "Nov", "Dec"],                dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab']            });        }        function datePickerFechaFin(){            $('#fecha_fin').datepicker({                numberOfMonths: 1,                regional: 'es',                dateFormat: 'dd-mm-yy',                changeMonth: true,                changeYear: true,                yearRange: hoy.getFullYear()+':2100',                monthNamesShort: ["Ene", "Feb", "Mar", "Abr",                    "May", "Jun", "Jul", "Ago", "Sep",                    "Oct", "Nov", "Dec"],                dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab']            });        }        window.addEventListener('load', function(){            datePickerFechaInicio();            datePickerFechaFin();        }, false);*/        function datePiker(){         if (typeof Laracasts !== 'undefined') {         var hoy = new Date();         var bandera = true;         var cont = 0;         while (bandera) {         var fecha = hoy.toJSON().slice(0, 10);         bandera = false;         for (var i = 0, len = Laracasts.unavailable.length; i < len; i++) {         if (fecha == Laracasts.unavailable[i]) {         bandera = true;         }         }         hoy.setDate(hoy.getDate() + 1);         cont = cont + 1;         }         // Booking Bar         $('#fecha_ini').datepicker({         numberOfMonths: 1,         regional: 'es',         dateFormat: 'dd-mm-yy',         changeMonth: true,         changeYear: true,         yearRange: hoy.getFullYear()+':2100',         monthNamesShort: ["Ene", "Feb", "Mar", "Abr",         "May", "Jun", "Jul", "Ago", "Sep",         "Oct", "Nov", "Dec"],         dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],         minDate: '0M',         beforeShowDay: function (date) {         var string = jQuery.datepicker.formatDate('yy-mm-dd', date);         return [Laracasts.unavailable.indexOf(string) == -1]         },         onSelect: function () {         var date = $(this).datepicker('getDate');         date.setDate(date.getDate() + 1);         $('#fecha_fin').datepicker('option', 'minDate', date);         $('#fecha_fin').datepicker('setDate', date);             $.ajax({                 url: '{{URL::to('Reservar')}}'+'/Precio/' + jQuery.datepicker.formatDate('yy-mm-dd', dateArribal) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', date),                 type: 'GET',                 dataType: 'json',                 //cache:false,                 success: function (data) {                     if (data['success']) {                         $('input[name=precio]').val(data['precio']+'€');                     }                 }             });         }         });         $('#fecha_fin').datepicker({         numberOfMonths: 1,         regional: 'es',         dateFormat: 'dd-mm-yy',         changeMonth: true,         changeYear: true,         yearRange: hoy.getFullYear()+':2100',         monthNamesShort: ["Ene", "Feb", "Mar", "Abr",         "May", "Jun", "Jul", "Ago", "Sep",         "Oct", "Nov", "Dec"],         dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],         minDate: '0M',         beforeShowDay: function (date) {         var dateArribal = $('#fecha_ini').datepicker('getDate');         var cont = 0;         while (Laracasts.unavailable.indexOf(jQuery.datepicker.formatDate('yy-mm-dd', dateArribal)) == -1 && cont < 60) {         dateArribal.setDate(dateArribal.getDate() + 1);         cont++;         }         var string = jQuery.datepicker.formatDate('yy-mm-dd', date);         return [date <= dateArribal]         },         onSelect: function () {         var date = $(this).datepicker('getDate');         var bandera = false;         var dateArribal = $('#fecha_ini').datepicker('getDate');         for (var i = 0, len = Laracasts.unavailable.length; i < len; i++) {         if (jQuery.datepicker.formatDate('yy-mm-dd', dateArribal) < Laracasts.unavailable[i] && Laracasts.unavailable[i] < jQuery.datepicker.formatDate('yy-mm-dd', date)) {         bandera = true;         }         }         if (bandera) {         $(".alert-fechas").fadeTo(4000, 500).slideUp(500);         dateArribal.setDate(dateArribal.getDate() + 1);         $(this).datepicker('setDate', dateArribal);         }else {             $.ajax({                 url: '{{URL::to('Reservar')}}'+'/Precio/' + jQuery.datepicker.formatDate('yy-mm-dd', dateArribal) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', date),                 type: 'GET',                 dataType: 'json',                 //cache:false,                 success: function (data) {                     if (data['success']) {                         $('input[name=precio]').val(data['precio']+'€');                     }                 }             });         }         $('#fecha_fin-day').html($('#fecha_fin').val().split(' ')[0]);         $('#fecha_fin-month').html($('#fecha_fin').val().split(' ')[1]);         }         });         if ($('#fecha_ini').val() === '') {         $('#fecha_ini').datepicker().datepicker('setDate', '' + (cont - 1));         }         if ($('#fecha_fin').val() === '') {         $('#fecha_fin').datepicker().datepicker('setDate', '' + cont);         }         if ($('#fecha_ini').length) {         var date = $('#fecha_ini').datepicker('getDate');         date.setDate(date.getDate() + 1);         $('#fecha_fin').datepicker('option', 'minDate', date);         }         }         }        if(typeof Laracasts !== 'undefined'){            datePiker();            $.ajax({                url: '{{URL::to('/Reservar/Precio')}}/' + jQuery.datepicker.formatDate('yy-mm-dd', $('#fecha_ini').datepicker('getDate')) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', $('#fecha_fin').datepicker('getDate')),                type: 'GET',                dataType: 'json',                //cache:false,                success: function (data) {                    if (data['success']) {                        $('input[name=precio]').val(data['precio']+'€');                    }                }            });        }    </script>@stop