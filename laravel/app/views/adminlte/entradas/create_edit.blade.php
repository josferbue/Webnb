@extends('adminlte.layouts.modal')@section('styles')    <link rel="stylesheet" href="{{ URL::asset('template/adminLTE/plugins/select2/select2.min.css') }}"/>    <link href="{{asset('assets/css/dropzone.css')}}" rel="stylesheet" />    <style rel="stylesheet">        .select2-selection__choice{            color: #333333 !important;            margin-bottom: 5px !important;        }        .select2.select2-container{            width: 100% !important;        }    </style>@stop{{-- content --}}@section('content')	{{-- Edit entrada Form --}}	<form class="form-horizontal" method="post" action="@if (isset($entrada)){{ URL::to('adminlte/blog/' . $entrada->id . '/edit') }}@endif" autocomplete="off">		<!-- CSRF Token -->		<input type="hidden" name="_token" value="{{{ csrf_token() }}}" />		<!-- ./ csrf token -->		<!-- Tabs contenido -->		<div class="tab-content">			<!-- General tab -->			<div class="tab-pane active" id="tab-general">				<!-- entrada titulo -->				<div class="form-group {{{ $errors->has('titulo') ? 'has-error' : '' }}}">                    <div class="col-md-12">                        <label class="control-label" for="titulo">Título</label>						<input class="form-control" type="text" name="titulo" id="titulo" value="{{{ Input::old('titulo', isset($entrada) ? $entrada->titulo : null) }}}" />						{{ $errors->first('titulo', '<span class="help-block">:message</span>') }}					</div>				</div>				<!-- entrada subtitulo -->				<div class="form-group {{{ $errors->has('subtitulo') ? 'has-error' : '' }}}">                    <div class="col-md-12">                        <label class="control-label" for="subtitulo">Subtítulo</label>						<input class="form-control" type="text" name="subtitulo" id="subtitulo" value="{{{ Input::old('subtitulo', isset($entrada) ? $entrada->subtitulo : null) }}}" />						{{ $errors->first('subtitulo', '<span class="help-block">:message</span>') }}					</div>				</div>				<!-- categoria -->				<div class="form-group {{{ $errors->has('categoria') ? 'has-error' : '' }}}">                    <div class="col-md-12">                        <label class="control-label" for="categoria">Categoría</label>						<input class="form-control" type="text" name="categoria" id="categoria" value="{{{ Input::old('categoria', isset($entrada) ? $entrada->categoria : null) }}}" />						{{ $errors->first('categoria', '<span class="help-block">:message</span>') }}					</div>				</div>                <!--  tags -->                <div class="form-group {{{ $errors->has('tags') ? 'has-error' : '' }}}">                    <div class="col-md-12">                        <label class="control-label" for="tags">Tags</label>                        <select multiple="multiple" class="form-control" name="tags[]" id="tags">                        </select>                        {{ $errors->first('tags', '<span class="help-block">:message</span>') }}                    </div>                </div>				<!-- contenido -->				<div class="form-group {{{ $errors->has('contenido') ? 'has-error' : '' }}}">					<div class="col-md-12">                        <label class="control-label" for="contenido">Contenido</label>						<textarea class="form-control full-width ckeditor" name="contenido" value="contenido" rows="10">{{{ Input::old('contenido', isset($entrada) ? $entrada->contenido : null) }}}</textarea>						{{ $errors->first('contenido', '<span class="help-block">:message</span>') }}					</div>				</div>				<!-- ./ contenido -->				<!-- Url -->								<!-- ./ groups -->			</div>			<!-- ./ general tab -->							</div>		<!-- ./ tabs contenido -->		<!-- Form Actions -->		<div class="form-group">			<div class="col-md-12">				<button type="submit" class="btn btn-lg btn-success">Actulizar</button>			</div>		</div>		<!-- ./ form actions -->	</form>	@if(isset($entrada))		<div class="wrapper">			<div id="dropzone">                {{ Form::open(array('url' => 'adminlte/blog/'.$entrada->id.'/upload', 'class'=>'dropzone', 'id'=>'my-dropzone')) }}                    @include('adminlte.include.dropbox')                {{ Form::close() }}			</div>	@endif	</div>@stop@section('styles')<!-- 1 --><link href="{{asset('assets/css/dropzone.css')}}" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">@stop{{-- Scripts --}}@section('scripts')    <!-- SELECT2 JQUERY.PLUGIN -->    <script type="text/javascript" src="{{ URL::asset('template/adminLTE/plugins/select2/select2.full.min.js') }}"></script>    <script type="text/javascript" src="{{ URL::asset('template/adminLTE/plugins/select2/i18n/es.js') }}"></script>    <!-- CKEDITOR JQUERY.PLUGIN -->    <script type="text/javascript" src="{{ URL::asset('template/adminLTE/plugins/ckeditor/ckeditor.js') }}"></script>    <!-- DROPZONE -->	<script type="text/javascript" src="{{ URL::asset('assets/js/dropzone.js') }}"></script>	<script type="text/javascript">    // Inicializar campo para tags    $("#tags").select2({        tags: true,        multiple : true        @if(isset($entrada))        ,        data : Laracasts.tags,        initSelection: function(element, callback){            $(element).find('option').attr('selected', 'selected');            return callback(Laracasts.tags);        }        @endif    });    $('#tags').trigger('change');    //myDropzone is the configuration for the element that has an id attribute	// with the value my-dropzone (or myDropzone)	//$( "#categoria" ).autocomplete({	//	source: Laracasts.categorias	//});    Dropzone.options.myDropzone = {        acceptedFiles: ".jpeg,.jpg,.png",        uploadMultiple: false,        init: function() {            var myDropzone = this;            this.on("addedfile", function(file) {                var option = document.createElement("option");                var removeButton = Dropzone.createElement('<a class="dz-remove">Remove file</a>');                var _this = this;                removeButton.addEventListener("click", function(e) {                    e.preventDefault();                    e.stopPropagation();                    var fileInfo = new Array();                    fileInfo['name']=file.name;                    $.ajax({                        type: "POST",                        url: "{{ URL::to('adminlte/blog/delete-image') }}", // URL que que va al controlador que elimina la imagen                        data: {_token : "{{ csrf_token() }}", file : file.name, url : file.url2},                        beforeSend: function () {                            // before send                        },                        success: function (response) {                            if (response == 'success')                                alert('deleted');                        },                        error: function () {                            alert("error");                        }                    });                    _this.removeFile(file);                    // If you want to the delete the file on the server as well,                    // you can do the AJAX request here.                });                // Add the button to the file preview element.                file.previewElement.appendChild(removeButton);            });            this.on('complete', function(file){                $("img:not(.img-responsive)").addClass('img-responsive');            });            $.each( Laracasts.files, function( key, value ) {                // Call the default addedfile event handler                myDropzone.emit("addedfile", value);                // And optionally show the thumbnail of the file:                myDropzone.emit("thumbnail", value, value.url);                myDropzone.emit("complete", value);            });        }    };	</script>@stop