@extends('site.layouts.default')@section('title')    Apartamento en Sevilla | Synergia Resort    @parent@stop@section('styles')    <style rel="stylesheet">        .has-error select, .has-error input[type=text]{            border: 1px solid #a94442 !important;        }        span.help-block{            margin:     5px 0;            color:      #fff;        }        .form{            text-align: left !important;        }        .button{            margin: 20px auto !important;            display: block !important;        }        .alert-success{            color: #3c763d !important;            background-color: #dff0d8 !important;            border-color: #d6e9c6 !important;        }        .alert-success h4{            color: #3c763d !important;        }        #enl_condiciones_uso{            color: #00dbff;        }        .form .field select option{            color: #fff !important;        }        .no-buttons-next-prev .ui-datepicker-prev, .no-buttons-next-prev .ui-datepicker-next{            display: none !important;        }        option{            background-color: #555;        }        #total{            border: 1px solid #fff;            font-weight: 500;            text-align: center;            font-size: 2.5em;            background-color: #baac8f;        }    </style>    <link rel="stylesheet" href="{{{asset('template/system/magnific-popup/magnific-popup.css')}}}"/>@stop@section('content')<main>    <!-- Form | START -->    <div class="section form fade">        <div class="center">            <div class="label">Apartamento en Sevilla</div>            <h1>Reserva tu estancia</h1>            <!--<h5>Please make a booking request using our contact form and we will get back to you as soon as possible.</h5>-->            <!-- Notifications -->            @include('notifications')            <!-- ./ notifications -->            <div class="synergia-header" style="z-index: 100; ">                <div class="alert alert-danger alert-fechas" style="display: none;" >                    <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close"></a>                    <strong>Fecha erronea</strong><br> No has seleccionado un intervalo válido.                </div>            </div>            <form name="reserva" action="{{URL::to("Reservar")}}" method="post">                <!-- CSRF Token -->                <input type="hidden" name="_token" value="{{{ csrf_token() }}}" />                <div class="col-2">                    <div class="form-group loading">                        <!-- Arrival Date -->                        <div class="date">                        </div>                    </div>                    <div class="form-group {{{ $errors->has('fecha_ini') ? 'has-error' : '' }}}">                        <!-- Arrival Date -->                        <div class="field calendar">                            <span class="tag"><i class="icon ion-android-arrow-forward"></i></span>                            <input name="fecha_ini" class="contact-arrival" type="text" id="fecha_ini" value="{{{ isset($fecha_ini) ? $fecha_ini : Input::old('fecha_ini', isset($reserva) ? $reserva->fecha_ini : null) }}}" readonly />                            <i class="icon ion-ios-calendar-outline"></i>                        </div>                        {{ $errors->first('fecha_ini', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('fecha_fin') ? 'has-error' : '' }}}">                        <!-- Departure Date -->                        <div class="field calendar">                            <span class="tag"><i class="icon ion-android-arrow-back"></i></span>                            <input name="fecha_fin" class="contact-departure" type="text" id="fecha_fin" value="{{{ isset($fecha_fin) ? $fecha_fin : Input::old('fecha_fin', isset($reserva) ? $reserva->fecha_fin : null) }}}" readonly />                            <i class="icon ion-ios-calendar-outline"></i>                        </div>                        {{ $errors->first('fecha_fin', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('hora_llegada') ? 'has-error' : '' }}}">                        <!-- Arrival Time -->                        <div class="field">                            <select name="hora_llegada" id="hora_llegada" class="hora-llegada">                                <option>Hora de Llegada</option>                                @for($i = 8; $i<=19; $i++)                                    <option value="{{ $i }}:00" @if(Input::old('hora_llegada') == $i.':00') selected @endif>{{ $i }}:00</option>                                    <option value="{{ $i }}:30" @if(Input::old('hora_llegada') == $i.':30') selected @endif>{{ $i }}:30</option>                                @endfor                                <option value="20:00" @if(Input::old('hora_llegada') == '20:00') selected @endif>20:00</option>                            </select>                        </div>                        {{ $errors->first('hora_llegada', '<span class="help-block">:message</span>') }}                    </div>                    <!--<div class="field">                        <select name="contact-rooms" class="infants">                            <option value="1">1 Room</option>                            <option value="2" >2 Rooms</option>                            <option value="3" >3 Rooms</option>                        </select>                    </div>-->                    <div class="form-group {{{ $errors->has('adultos') ? 'has-error' : '' }}}">                        <div class="field">                            <select name="adultos" class="adults" id="adultos" value="{{{ Input::old('adultos', isset($reserva) ? $reserva->adultos : null) }}}">                                <option value="1" >1 Adultos</option>                                <option value="2" >2 Adultos</option>                                <option value="3" >3 Adultos</option>                                <option value="4" >4 Adultos</option>                                <option value="5" >5 Adultos</option>                                <option value="6" >6 Adultos</option>                                <option value="7" >7 Adultos</option>                                <option value="8" >8 Adultos</option>                            </select>                        </div>                        {{ $errors->first('adultos', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('ninos') ? 'has-error' : '' }}}">                        <div class="field">                            <select name="ninos" class="children" id="ninos" value="{{{ Input::old('ninos', isset($reserva) ? $reserva->ninos : null) }}}">                                <option value="0">0 Niños</option>                                <option value="1">1 Niños</option>                                <option value="2">2 Niños</option>                                <option value="3">3 Niños</option>                                <option value="4">4 Niños</option>                            </select>                        </div>                        {{ $errors->first('ninos', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group">                        <div class="field">                            <input name="total" id="total" class=".total" type="text" placeholder="Total" value="" readonly="readonly"/>                        </div>                    </div>                </div>                <div class="col-2">                    <div class="form-group {{{ $errors->has('nombre') ? 'has-error' : '' }}}">                        <div class="field">                            <input name="nombre" id="nombre" type="text" placeholder="Nombre y Apellidos" value="{{{ Input::old('nombre', isset($reserva) ? $reserva->nombre : null) }}}" required />                        </div>                        {{ $errors->first('nombre', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('fecha_nacimiento') ? 'has-error' : '' }}}">                            <div class="field calendar">                                <input style="padding-left: 15px; font-weight: 300;" name="fecha_nacimiento" class="fecha-nacimiento" type="text" id="fecha_nacimiento" value="{{{ Input::old('fecha_nacimiento', isset($reserva) ? $reserva->fecha_nacimiento : null) }}}" placeholder="Fecha de Nacimiento" readonly />                                <i class="icon ion-ios-calendar-outline"></i>                            </div>                        {{ $errors->first('fecha_nacimiento', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('dni') ? 'has-error' : '' }}}">                        <div class="field">                            <input name="dni" id="dni" type="text" placeholder="Dni / Pasaporte" value="{{{ Input::old('dni', isset($reserva) ? $reserva->dni : null) }}}" required />                        </div>                        {{ $errors->first('dni', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('fecha_expedicion') ? 'has-error' : '' }}}">                            <div class="field calendar">                                <input style="padding-left: 15px; font-weight: 300;" name="fecha_expedicion" class="fecha-expedicion" type="text" id="fecha_expedicion" value="{{{ Input::old('fecha_expedicion', isset($reserva) ? $reserva->fecha_expedicion : null) }}}" placeholder="Fecha de Expedición" readonly />                                <i class="icon ion-ios-calendar-outline"></i>                            </div>                        {{ $errors->first('fecha_expedicion', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('pais_nacionalidad') ? 'has-error' : '' }}}">                        <div class="field">                            <input name="pais_nacionalidad" type="text" id="pais_nacionalidad" value="{{{ Input::old('pais_nacionalidad', isset($reserva) ? $reserva->pais_nacionalidad : null) }}}" placeholder="País"/>                        </div>                        {{ $errors->first('pais_nacionalidad', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('email') ? 'has-error' : '' }}}">                        <div class="field">                            <input name="email" id="email" type="text" placeholder="Email" value="{{{ Input::old('email', isset($reserva) ? $reserva->email : null) }}}" required />                        </div>                        {{ $errors->first('email', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('telefono') ? 'has-error' : '' }}}">                        <div class="field">                            <input name="telefono" id="telefono" type="text" placeholder="Teléfono" value="{{{ Input::old('telefono', isset($reserva) ? $reserva->telefono : null) }}}" />                        </div>                        {{ $errors->first('telefono', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group {{{ $errors->has('observaciones') ? 'has-error' : '' }}}">                        <div class="field">                            <textarea name="observaciones" id="observaciones" placeholder="Observaciones">{{{ Input::old('observaciones', isset($reserva) ? $reserva->observaciones : null) }}}</textarea>                        </div>                        {{ $errors->first('observaciones', '<span class="help-block">:message</span>') }}                    </div>                    <div class="form-group">                        <div class="field" style="background-color: transparent;">                            <input value="on" type="checkbox" name="condiciones_uso" id="condiciones_uso" style="width: auto; display: inline;"/>                            Acepte las <a id="enl_condiciones_uso" href="{{ URL::to('Condiciones-uso') }}">condiciones de uso.</a>                        </div>                        {{ $errors->first('condiciones_uso', '<span class="help-block">:message</span>') }}                    </div>                </div>                <div class="col-1">                    <!-- Honeypot (for bot spam) --><input name="contact-email2" type="text" placeholder="Email Address" autocomplete="false" class="honeypot" value="" />                    <button class="button" name="send" value="sendform">Reservar <i class="icon ion-ios-arrow-right"></i></button>                </div>            </form>        </div>    </div>    <!-- Form | END -->    <!-- USP Strip | START -->    <div class="section usp fade">        <div class="center">            <div class="col-3">                <div class="item">                    <i class="icon ion-ios-telephone-outline"></i>                    <h4>+34 616 13 84 91</h4>                </div>            </div>            <div class="col-3">                <div class="item">                    <i class="icon ion-ios-email-outline"></i>                    <h4>cristina@synergia.es</h4>                </div>            </div>            <div class="col-3">                <div class="item">                    <i class="icon ion-ios-eye-outline"></i>                    <h4>C/ Conteros 2, Sevilla</h4>                </div>            </div>        </div>    </div>    <!-- USP Strip | END -->    <!-- Social | START -->    <!-- Social | END --></main>@stop@section('scripts')    <script type="text/javascript" src="{{{asset('template/system/magnific-popup/jquery.magnific-popup.min.js')}}}"></script>    <script type="text/javascript">        var months = 2;        if ($(window).width() < 1000) {            var months = 1;        }        $('.ccalendar').hide();        $('.calendar').hide();        $('.loading .date').html('<div ><center><img src="{{asset('template/system/images/ajax-loader-long.gif')}}"/></center></div>');        $.ajax({            url: RESERVA_URL+'/Unavailables',            type: 'GET',            dataType: 'json',            //cache:false,            success: function (data) {                $('.loading .date').html('');                $('.calendar').show();                $('.calendar').show();                var unavailables = data['unavailables'];                var hoy = new Date();                var bandera = true;                var cont = 0;                while (bandera) {                    var fecha = hoy.toJSON().slice(0, 10);                    bandera = false;                    for (var i = 0, len = unavailables.length; i < len; i++) {                        if (fecha == unavailables[i]) {                            bandera = true;                        }                    }                    hoy.setDate(hoy.getDate() + 1);                    cont = cont + 1;                }                    $('.contact-arrival').datepicker({                        minDate: '0M',                        regional: 'es',                        numberOfMonths: months,                        dateFormat: 'd MM yy',                        beforeShowDay: function (date) {                            var string = jQuery.datepicker.formatDate('yy-mm-dd', date);                            return [unavailables.indexOf(string) == -1]                        },                        onSelect: function () {                            var date = $(this).datepicker('getDate');                            date.setDate(date.getDate() + 1);                            $('.contact-departure').datepicker('option', 'minDate', date);                            $('.contact-departure').datepicker('setDate', date);                            $.ajax({                                url: '{{URL::to('Reservar')}}' + '/Precio/' + jQuery.datepicker.formatDate('yy-mm-dd', $(this).datepicker('getDate')) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', date),                                type: 'GET',                                dataType: 'json',                                //cache:false,                                success: function (data) {                                    if (data['success']) {                                        $('input[name=total]').val(data['precio'] + '€');                                    }                                }                            });                        }                    }).focus(function () {                        $('#ui-datepicker-div').removeClass('no-buttons-next-prev');                    });                    $('.contact-departure').datepicker({                        minDate: '0M',                        numberOfMonths: months,                        dateFormat: 'd MM yy',                        beforeShowDay: function (date) {                            var dateArribal = $('.contact-arrival').datepicker('getDate');                            var cont = 0;                            while (unavailables.indexOf(jQuery.datepicker.formatDate('yy-mm-dd', dateArribal)) == -1 && cont < 60) {                                dateArribal.setDate(dateArribal.getDate() + 1);                                cont++;                            }                            var string = jQuery.datepicker.formatDate('yy-mm-dd', date);                            return [date <= dateArribal];                        },                        onSelect: function () {                            var date = $(this).datepicker('getDate');                            var bandera = false;                            var dateArribal = $('.contact-arrival').datepicker('getDate');                            for (var i = 0, len = unavailables.length; i < len; i++) {                                if (jQuery.datepicker.formatDate('yy-mm-dd', dateArribal) < unavailables[i] && unavailables[i] < jQuery.datepicker.formatDate('yy-mm-dd', date)) {                                    bandera = true;                                }                            }                            if (bandera) {                                $(".alert-fechas").fadeTo(4000, 500).slideUp(500);                                dateArribal.setDate(dateArribal.getDate() + 1);                                $(this).datepicker('setDate', dateArribal);                            } else {                                $.ajax({                                    url: '{{URL::to('Reservar')}}' + '/Precio/' + jQuery.datepicker.formatDate('yy-mm-dd', dateArribal) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', date),                                    type: 'GET',                                    dataType: 'json',                                    //cache:false,                                    success: function (data) {                                        if (data['success']) {                                            $('input[name=total]').val(data['precio'] + '€');                                        }                                    }                                });                            }                        }                    }).focus(function () {                        $('#ui-datepicker-div').removeClass('no-buttons-next-prev');                    });                    if ($('.contact-arrival').val() === '') {                        $('.contact-arrival').datepicker().datepicker('setDate', '' + (cont - 1));                    }                    if ($('.contact-departure').val() === '') {                        $('.contact-departure').datepicker().datepicker('setDate', '' + cont);                    }                    var date = $('.contact-arrival').datepicker('getDate');                    date.setDate(date.getDate() + 1);                    $('.contact-departure').datepicker('option', 'minDate', date);                    $.ajax({                        url: '{{URL::to('Reservar')}}' + '/Precio/' + jQuery.datepicker.formatDate('yy-mm-dd', $('.contact-arrival').datepicker('getDate')) + '/' + jQuery.datepicker.formatDate('yy-mm-dd', $('.contact-departure').datepicker('getDate')),                        type: 'GET',                        dataType: 'json',                        //cache:false,                        success: function (data) {                            if (data['success']) {                                $('input[name=total]').val(data['precio']+'€');                            }                        }                    });            }        });    </script>    <script type="text/javascript">        var hoy = new Date();        function datePickerFechaDeNacimiento(){            $('.fecha-nacimiento').datepicker({                numberOfMonths: 1,                regional: 'es',                dateFormat: 'd MM yy',                changeMonth: true,                changeYear: true,                yearRange: '1900:' + hoy.getFullYear(),                monthNamesShort: ["Ene", "Feb", "Mar", "Abr",                    "May", "Jun", "Jul", "Ago", "Sep",                    "Oct", "Nov", "Dec"],                dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab']            }).focus(function(){                $('#ui-datepicker-div').addClass('no-buttons-next-prev');            });        }        function datePickerFechaDeExpedicion(){            $('.fecha-expedicion').datepicker({                numberOfMonths: 1,                regional: 'es',                dateFormat: 'd MM yy',                changeMonth: true,                changeYear: true,                yearRange: '1900:' + hoy.getFullYear(),                monthNamesShort: ["Ene", "Feb", "Mar", "Abr",                    "May", "Jun", "Jul", "Ago", "Sep",                    "Oct", "Nov", "Dec"],                dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab']            }).focus(function(){                $('#ui-datepicker-div').addClass('no-buttons-next-prev');            });        }        window.addEventListener('load', function(){            //Asignar Popup a condiciones de uso            $('#enl_condiciones_uso').magnificPopup({                type: 'ajax'            });            //Cálculo del precio            //Mostrar calendarios de fechas de nacimiento y expedición            datePickerFechaDeNacimiento();            datePickerFechaDeExpedicion();        }, false);    </script>@stop